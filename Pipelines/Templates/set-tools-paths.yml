steps:
  #Set pipeline variables for each of the tools folders that dependencies are installed to.
  #These variables will be used for in the caching tasks
  - powershell: |
      if (Test-Path Env:VSTS_TOOLS_PATH) {
          $toolsPath = $Env:VSTS_TOOLS_PATH
      }
      elseif (Test-Path Env:PIPELINE_WORKSPACE) {
          $toolsPath = $Env:PIPELINE_WORKSPACE
      }
      elseif (Test-Path Env:AGENT_BUILDDIRECTORY ) {
          $toolsPath = $Env:AGENT_BUILDDIRECTORY
      }
      else {
          $toolsPath = Get-Location
      }
      $buildToolsSubPath = "_t\PA_BT"
      $buildToolsPath = "$toolsPath\$buildToolsSubPath"
      echo "##vso[task.setvariable variable=buildToolsSubPath]$buildToolsSubPath"
      echo "##vso[task.setvariable variable=buildToolsPath]$buildToolsPath"
      
      $powerPlatformToolsSubPath = "_coe\ALM_ACC"
      $powerPlatformToolsPath = "$toolsPath\$powerPlatformToolsSubPath"
      echo "##vso[task.setvariable variable=powerPlatformToolsSubPath]$powerPlatformToolsSubPath"
      echo "##vso[task.setvariable variable=powerPlatformToolsPath]$powerPlatformToolsPath"
    displayName: 'Set toolsPaths'
  